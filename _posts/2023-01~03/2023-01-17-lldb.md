---
layout: post
title:  "lldb 技巧"
date:  2023-01-17
tags: [note, system]
---

  lldb 及目前常用的小技巧

# 安装

  i386 上，安装 lldb 10
  https://www.mail-archive.com/lldb-dev@lists.llvm.org/msg08245.html

```sh
# 常用用具
$ sudo apt install gcc
$ sudo apt install nasm

$ apt-cache search lldb


# 编译
$ nasm -f elf dt.asm
# 连接
$ ld -m elf_i386 -s -o dt dt.o

```

# lldb vs gdb

  https://lldb.llvm.org/use/map.html


## GDB

```sh
$ gdb ./a.out

# 查看汇编
# https://stackoverflow.com/questions/1902901/show-current-assembly-instruction-in-gdb
(gdb) layout asm

# 开始即断点
# https://stackoverflow.com/questions/10483544/stopping-at-the-first-machine-code-instruction-in-gdb
(gdb) starti

# step in
(gdb) si

# 汇编下一步
(gdb) si

# 查看内存
(gdb) x/16x 0x804a00e
```
# lldb

https://lldb.llvm.org/use/map.html

```sh
# main 断点
(lldb) b main

# 根据地址设置断点
(lldb) b 0x001

# 启动断点
(lldb) process launch --stop-at-entry

# 下一步
(lldb) n
# 回车下一步，回车是重复执行上一个命令
(lldb) [ENTER]

# 读取所有寄存器
(lldb) re r -a

# 读取内存
(lldb) x 0x001
```

## vi

```sh
# 删除所有行
:%d
```

## 其他 CLI

* 查看二进制格式 `nm ./a.out`
* 查看汇编代码 `objdump -S ./a.out`


## FAQ

* https://bugs.archlinux32.org/index.php?do=details&task_id=108
  *

# 参考
* https://www.nesono.com/sites/default/files/lldb%20cheat%20sheet.pdf
* https://lldb.llvm.org/use/tutorial.html
